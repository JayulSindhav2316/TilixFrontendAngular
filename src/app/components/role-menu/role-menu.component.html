<div class="p-grid">
  <p-toast></p-toast>
  <div class="p-col-2 p-md-2 p-xl-2"></div>
  <div class="p-col-8 p-md-8 p-xl-8">
    <div class="card">
      <p-toolbar styleClass="p-mb-4">
        <ng-template pTemplate="left">
          <p-dropdown [options]="roles" [(ngModel)]="selectedRole" (onChange)="Loadmenus($event)"
            placeholder="Select a Role" optionValue="roleId" optionLabel="name" [showClear]="true"></p-dropdown>
        </ng-template>
        <ng-template pTemplate="right">
          <button pButton pRipple label="Save" icon="pi pi-save" class="p-button-success p-mr-2 p-mb-2"
            (click)="updateRole()" [disabled]="!(roleId>0)"></button>
          <button pButton pRipple label="Cancel" icon="pi pi-cross" class="p-button-danger p-mb-2 p-mr-2"
            (click)="cancel()"></button>
          <button pButton pRipple label="Reset" icon="pi pi-undo" class="p-button-danger p-mb-2"
            (click)="reset()"></button>
        </ng-template>
      </p-toolbar>

      <div class="card">
        <h5>Role Menu Links</h5>
        <p-table [value]="menus" styleClass="p-datatable-sm">
          <ng-template pTemplate="header">
            <tr>
              <th>Menu Group</th>
              <th>Name</th>
              <th>Allow Access</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-menu let-rowIndex="rowIndex">
            <tr *ngIf="rowGroupMetadata[menu.group].index === rowIndex">
              <td colspan="2">
                <span class="p-text-bold p-ml-2">{{menu.group}}</span>
              </td>
              <td>
                <p-inputSwitch [(ngModel)]="rowGroupMetadata[menu.group].status"
                  (onChange)="handleMenuGroupSelection(menu.group)"></p-inputSwitch>
              </td>
            </tr>
            <tr>
              <td>&nbsp;</td>
              <td>
                {{menu.menuName}}
              </td>
              <td>
                <p-inputSwitch [(ngModel)]="menu.isSelected" (onChange)="handleMenuSelection(menu)"></p-inputSwitch>
              </td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </div>
    <p-confirmDialog [style]="{width: '450px'}"></p-confirmDialog>
  </div>
  <div class="p-col-2 p-md-2 p-xl-2"></div>
</div>