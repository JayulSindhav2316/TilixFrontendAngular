<p-toast></p-toast>
<div class="card">
    <div class="p-grid vertical-container">
      <div class="p-col-12 p-d-flex p-jc-center">
        <div style="margin-top: 5%;">
          <img [src]="'assets/layout/images/trilix_header.png'" height="109" width="297">
        </div>
      </div>
    </div>
    <div class="p-grid vertical-container">
        <div class="p-col-12 p-d-flex p-ai-center p-jc-center">
          <div class="mbrmax-rounded-div" *ngIf="!resetPasswordEnabled">
            <div class="p-field">
            </div>
            <div style="height: 25px;"></div>
            <form [formGroup]="resetRequestForm" (ngSubmit)="onSubmit()">
              <div class="p-fluid p-formgrid p-grid p-jc-center" *ngIf="!resetLinkSent">
                <div class="p-field p-col-8" >
                 <p>A Password reset link will be sent to your Email to reset your password. If you do not get an email with link then please try again</p>
                </div>
                <input formControlName="organizationName" type="hidden">
              </div>
              <div class="p-fluid p-formgrid p-grid p-jc-center" *ngIf="resetLinkSent">
                <div class="p-field p-col-8" >
                 <p>A Password reset link has been sent to your Email address. If you do not get an email with link then please try again</p>
                </div>
              </div>
              <div class="p-fluid p-formgrid p-grid p-jc-center" *ngIf="!resetLinkSent">
                <div class="p-field p-col-8" >
                   <label for="email">Email</label>
                  <input id="email" type="text" size="30" name="email"  formControlName="email" pInputText  required="true"/>
                </div>
              </div>
               
              <div class="p-col-12 p-d-flex p-jc-center" *ngIf="!resetLinkSent">
                <button pButton pRipple type="button" label="Submit" class="p-button-rounded" type="submit" ></button>
              </div>    
              <div class="p-col-12 p-d-flex p-jc-center">
                <div class="p-col-12" style="color: red; max-width:300px;text-align: center;" *ngIf="this.showErrorMessage"><span>{{this.errorMessage}}</span></div>
              </div>
            </form>
          </div>
          <div class="mbrmax-rounded-div" *ngIf="resetPasswordEnabled">
            <div class="p-field" *ngIf="validLink">
            </div>
            <div style="height: 25px;" *ngIf="validLink"></div>
            <form [formGroup]="resetPasswordForm" (ngSubmit)="onPasswordSubmit()">
              <div class="p-fluid p-formgrid p-grid p-jc-center" *ngIf="validLink">
                <div  class="p-field p-col-8" [ngClass]="errorIconCss('Password')">                  
                  <label for="Password">Password</label>
                  <div class="p-inputgroup">
                    <input autofocus [type]="showPassword ? 'text' : 'password'" pPassword formControlName="Password" maxlength=20  size="40"
                    (click) = "resetSubmitted('Password')" [ngClass]="errorFieldCss('Password')" (keypress) = "applyPasswordValidation()"/>
                    <span class="p-inputgroup-addon" (click)="clickShowPassword()"><i [class]="showPassword ? 'pi pi-eye':'pi pi-eye-slash'" ></i></span>
                  </div>
                  <app-field-error-display [displayError]="isFieldValid('Password')" [addErrorMessages]="addErrorMessages">
                  </app-field-error-display>
                </div>
              </div>  
              <div class="p-fluid p-formgrid p-grid p-jc-center" *ngIf="validLink">
                <div  class="p-field p-col-8" [ngClass]="errorIconCss('ConfirmPassword')">
                   <label for="ConfirmPassword">Confirm Password</label>
                   <div class="p-inputgroup">
                      <input [type]="showConfirmPassword ? 'text' : 'password'" pPassword formControlName="ConfirmPassword" maxlength=20  (click) = "resetSubmitted('ConfirmPassword')" [ngClass]="errorFieldCss('ConfirmPassword')" size="40"/>
                      <span class="p-inputgroup-addon" (click)="clickShowConfirmPassword()"><i [class]="showConfirmPassword ? 'pi pi-eye':'pi pi-eye-slash'" ></i></span>
                   </div>
                   <app-field-error-display [displayError]="isFieldValid('ConfirmPassword')" [addErrorMessages]="addErrorMessages">
                   </app-field-error-display>
                </div>
              </div>
              <div class="p-col-12 p-d-flex p-jc-center" *ngIf="!resetLinkSent">
                <button pButton pRipple type="button" label="Submit" class="p-button-rounded" type="submit" *ngIf="validLink"></button>
              </div>    
               
              <div class="p-col-12 p-d-flex p-jc-center">
                <div class="p-col-12" style="color: red; max-width:300px;text-align: center;" *ngIf="this.showErrorMessage"><span>{{this.errorMessage}}</span></div>
              </div>
              <div class="p-col-12 p-d-flex p-jc-center" *ngIf="!resetLinkSent">
                <button pButton pRipple type="button" label="Reset Password" class="p-button-rounded" type="button" *ngIf="!validLink"  (click)="resetPassword()"></button>
              </div>   
            </form>
          </div>
        </div>
    </div>
    <div class="p-grid vertical-container">
      <div class="p-col-12 p-d-flex p-ai-center p-jc-center">
        <div class="box" style="height:100px">
         &nbsp;
        </div>
      </div>
    </div>
  </div>